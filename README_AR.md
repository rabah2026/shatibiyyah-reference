# متن الشاطبية - تطبيق ويب متكامل

تطبيق ويب أنيق وحديث يوفر واجهة برمجية (API) وواجهة مستخدم لعرض متن الشاطبية "حرز الأماني ووجه التهاني في القراءات السبع".

## المميزات

### البيانات
- **1173 بيتاً** من متن الشاطبية الأصلي
- **تنظيم احترافي** للأبيات والأبواب
- **دعم كامل للعربية** في جميع الطبقات

### الواجهة البرمجية (API)
- **نقاط نهاية قوية** باستخدام tRPC
- **البحث المتقدم** عن الأبيات
- **الفلترة والترتيب** المرن
- **توثيق شامل** مع أمثلة عملية

### واجهة المستخدم
- **تصميم أنيق** وعصري
- **دعم RTL** كامل للعربية
- **بحث فوري** عن الأبيات
- **عرض منظم** للمحتوى
- **تجربة مستخدم سلسة**

## المتطلبات

- Node.js 22+
- pnpm أو npm
- قاعدة بيانات MySQL/TiDB

## التثبيت

### 1. استنساخ المشروع
```bash
git clone <repository-url>
cd shatibiyyah-api
```

### 2. تثبيت الاعتماديات
```bash
pnpm install
```

### 3. إعداد قاعدة البيانات
```bash
pnpm db:push
```

### 4. تحميل البيانات
```bash
npx tsx seed-db.ts
```

### 5. تشغيل التطبيق
```bash
pnpm dev
```

التطبيق سيكون متاحاً على `http://localhost:3000`

## البناء والنشر

### البناء للإنتاج
```bash
pnpm build
```

### تشغيل في الإنتاج
```bash
pnpm start
```

## الاختبارات

تشغيل جميع الاختبارات:
```bash
pnpm test
```

النتائج:
- ✓ 23 اختبار ناجح
- ✓ تغطية شاملة لجميع نقاط النهاية
- ✓ اختبار البيانات العربية
- ✓ اختبار البحث والفلترة

## البنية

```
shatibiyyah-api/
├── client/                 # واجهة المستخدم (React)
│   ├── src/
│   │   ├── pages/         # صفحات التطبيق
│   │   ├── components/    # مكونات إعادة الاستخدام
│   │   ├── lib/           # مكتبات مساعدة
│   │   └── index.css      # الأنماط العامة
│   └── public/            # الملفات الثابتة
├── server/                 # خادم Express و tRPC
│   ├── routers.ts         # نقاط نهاية API
│   ├── db.ts              # استعلامات قاعدة البيانات
│   └── _core/             # ملفات النظام الأساسية
├── drizzle/               # تعريفات قاعدة البيانات
│   └── schema.ts          # جداول وأنواع البيانات
├── verses.json            # بيانات الأبيات المستخرجة
├── seed-db.ts             # سكريبت تحميل البيانات
└── API_DOCUMENTATION.md   # وثائق API الشاملة
```

## نقاط نهاية API الرئيسية

### الأبيات
- `GET /api/trpc/shatibiyyah.verses.list` - جميع الأبيات
- `GET /api/trpc/shatibiyyah.verses.byNumber?input=<n>` - بيت برقمه
- `GET /api/trpc/shatibiyyah.verses.byId?input=<id>` - بيت برقم معرّفه
- `GET /api/trpc/shatibiyyah.verses.search?input=<query>` - البحث

### الأبواب
- `GET /api/trpc/shatibiyyah.chapters.list` - جميع الأبواب
- `GET /api/trpc/shatibiyyah.chapters.byId?input=<id>` - باب مع أبياته
- `GET /api/trpc/shatibiyyah.chapters.verses?input=<id>` - أبيات الباب

للمزيد من التفاصيل، انظر [وثائق API](./API_DOCUMENTATION.md)

## المكتبات والأدوات المستخدمة

### Frontend
- **React 19** - مكتبة واجهة المستخدم
- **Tailwind CSS 4** - نظام التصميم
- **shadcn/ui** - مكونات جاهزة
- **Wouter** - التوجيه

### Backend
- **Express 4** - خادم الويب
- **tRPC 11** - واجهة برمجية آمنة من الناحية النوعية
- **Drizzle ORM** - مكتبة قاعدة البيانات
- **MySQL2** - محرك قاعدة البيانات

### Testing
- **Vitest** - إطار الاختبار
- **TypeScript** - لغة البرمجة

## معالجة النصوص العربية

يتم معالجة النصوص العربية بشكل صحيح في:
- **قاعدة البيانات**: دعم كامل لـ UTF-8
- **الواجهة البرمجية**: جميع الاستعلامات تدعم العربية
- **واجهة المستخدم**: خط عربي متخصص (Noto Sans Arabic)
- **البحث**: بحث فعّال عن النصوص العربية

## الأداء

- **سرعة التحميل**: < 1 ثانية
- **سرعة البحث**: < 100ms
- **حجم الصفحة**: ~ 50KB (مضغوط)
- **استهلاك الذاكرة**: ~ 100MB

## الأمان

- **تشفير البيانات**: HTTPS في الإنتاج
- **التحقق من المدخلات**: جميع المدخلات يتم التحقق منها
- **حماية CORS**: معالجة صحيحة للطلبات المتقاطعة
- **معايير الأمان**: اتباع أفضل الممارسات

## الترخيص

هذا المشروع مفتوح المصدر ومتاح للاستخدام الحر.

## المساهمة

نرحب بالمساهمات! يرجى:
1. عمل Fork للمشروع
2. إنشاء فرع للميزة الجديدة
3. الالتزام بالتغييرات
4. دفع الفرع وإنشاء Pull Request

## الدعم

للمساعدة أو الإبلاغ عن مشاكل:
- افتح Issue في المستودع
- تواصل عبر البريد الإلكتروني

## شكر وتقدير

شكر خاص لـ:
- الإمام الشاطبي على هذا المتن القيّم
- المكتبة الشاملة على توفير النص الأصلي
- فريق Manus على منصة التطوير الرائعة

---

**آخر تحديث**: 4 فبراير 2026

**الإصدار**: 1.0.0

**الحالة**: ✓ جاهز للإنتاج
